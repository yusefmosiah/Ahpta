<div class="min-h-screen bg-gradient-to-br from-primary-start to-primary-end">
  <div class="bg-gradient-to-br from-primary-start to-primary-end relative w-full min-h-screen">
    <div class="container mx-auto p-4 md:p-8">
      <header class="text-center mb-8">
        <h1 class="text-2xl md:text-4xl font-bold text-white mb-2">Conversation <%= @conversation.id %></h1>
        <h2 class="text-base md:text-lg text-white mb-4">This is a conversation record from your database.</h2>
        <a href={~p"/conversations/#{@conversation}/show/edit"} phx-click={JS.push_focus()} class="inline-block bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
          Edit conversation
        </a>
      </header>

      <div class="bg-backdrop bg-opacity-60 bg-blur rounded-xl p-4 md:p-6 shadow-glass mb-8">
        <h3 class="text-lg md:text-xl font-bold text-black mb-2">Topic:</h3>
        <p class="text-black text-opacity-90 text-base md:text-lg"><%= @conversation.topic %></p>
        <h3 class="text-lg md:text-xl font-bold text-black mb-2">Is published:</h3>
        <p class="text-black text-opacity-90 text-base md:text-lg"><%= @conversation.is_published %></p>
      </div>

      <div>
        <h2 class="text-xl font-semibold mb-2 text-white">Messages:</h2>
        <ul id="message-list" phx-update="replace" class="space-y-4">
          <%= for message <- @messages do %>
            <li id={message.id} class="bg-backdrop bg-opacity-60 bg-blur rounded-xl p-4 md:p-6 shadow-glass">
              <strong class="text-lg md:text-xl font-bold text-black"><%= message.sender_id %>:</strong>
              <p class="text-black text-opacity-90 text-base md:text-lg"><%= message.content %></p>
            </li>
          <% end %>
          <%= for {id, content} <- @ongoing_messages do %>
            <li id={id} class="bg-backdrop bg-opacity-60 bg-blur rounded-xl p-4 md:p-6 shadow-glass">
              <strong class="text-lg md:text-xl font-bold text-black"><%= id %>:</strong>
              <p class="text-black text-opacity-90 text-base md:text-lg"><%= content %></p>
            </li>
          <% end %>
        </ul>
      </div>

      <div class="bg-backdrop bg-opacity-60 bg-blur rounded-xl p-4 md:p-6 shadow-glass mt-8">
        <h2 class="text-xl font-semibold mb-4 text-white">New Message:</h2>
        <form phx-submit="new_message">
          <label for="content" class="text-white font-bold">Content:</label>
          <input type="text" id="content" name="message[content]" class="shadow appearance-none border rounded w-full py-2 px-3 text-black mb-3 leading-tight focus:outline-none focus:shadow-outline" required />
          <input type="hidden" id="message_type" name="message[message_type]" value="human" required />
          <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Send</button>
        </form>
      </div>

      <div class="text-center mt-8">
        <a href={~p"/conversations"} class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded">Back to conversations</a>
      </div>

<.modal
  :if={@live_action == :edit}
  id="conversation-modal"
  show
  on_cancel={JS.patch(~p"/conversations/#{@conversation}")}
>

        <div class="bg-backdrop bg-opacity-60 bg-blur rounded-xl p-4 md:p-6 shadow-glass">
          <.live_component
            module={CapstoneWeb.ConversationLive.FormComponent}
            id={@conversation.id}
            title={@page_title}
            action={@live_action}
            conversation={@conversation}
            patch={~p"/conversations/#{@conversation}"}
          />

        </div>

      </.modal>
    </div>
  </div>
</div>
